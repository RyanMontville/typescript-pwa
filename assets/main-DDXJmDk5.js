(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}})();const C=[2023,2024,2025];let l=2025;const E=new URLSearchParams(window.location.search),h=E.get("year");h&&(l=isNaN(parseInt(h))?2025:parseInt(h));let I=E.get("search");const d=document.querySelector("body");async function H(t,e,o){e!==""&&(document.title=`${e} - Canvas Stats`),await new Promise(i=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>i(),{once:!0}):i()}),o&&await M(),await A(),await D(),await O(),await B();const a=document.querySelector("header"),r=document.querySelector("nav"),n=document.getElementById("search-group");a.classList.remove("hide"),r.classList.remove("hide"),n&&n.classList.remove("hide"),document.getElementById("logo-year").setAttribute("src",`images/logo${l}.png`),document.getElementById("changeYear").addEventListener("click",()=>{const i=document.getElementById("changeYearPopup"),y=document.createElement("h2");y.textContent="Select a year",i.appendChild(y);const v=C.reduce((m,p)=>{if(p!==l){const w=document.createElement("li"),f=document.createElement("button");return f.textContent=`${p}`,f.addEventListener("click",()=>{let b=window.location.href.split("?")[0],g=window.location.href.split("?")[1].split("&");g.forEach(($,S)=>{$.split("=")[0]==="year"&&(g[S]=`year=${p}`)});const P=g.join("&");window.location.href=`${b}?${P}`}),w.appendChild(f),m.appendChild(w),m}return m},document.createElement("ul"));i.append(v);const L=document.getElementById("changeYearContainer");L.style.display="flex"})}function U(){return l}function Y(){return h!==null}function x(){return I}async function u(t){try{const e=await fetch(t);if(!e.ok)throw console.error(`${e.status}: ${e.statusText}`),new Error("Error fetching header");return await e.text()}catch(e){console.error(`Error fethcing ${t}: ${e}`)}}async function D(t,e){try{const o=await u("../header.html");if(o){let a=document.createElement("header");a.setAttribute("class","hide"),a.innerHTML=o,d.prepend(a)}}catch(o){console.error(`Failed to load the header: ${o}`)}}async function A(){try{const t=await u("../nav.html");if(t){let e=document.createElement("nav");e.setAttribute("class","hide"),e.innerHTML=t,e.querySelector("#home").setAttribute("href",`/?year=${l}`),d.prepend(e)}}catch(t){console.error(`Failed to load the nav: ${t}`)}}async function M(){try{const t=await u("../search.html");if(t){const e=document.createElement("form");e.setAttribute("class","search-form-group hide"),e.setAttribute("id","search-group"),e.innerHTML=t,e.addEventListener("submit",o=>{o.preventDefault();const r=new FormData(e).get("serch-input");window.location.href=`users?search=${r}`}),d.prepend(e)}}catch(t){console.error(`Failed to load the nav: ${t}`)}}async function O(){const t=document.getElementById("footer-placeholder");try{const e=await u("../footer.html");if(e){const o=document.createElement("footer");o.innerHTML=e,d.replaceChild(o,t)}}catch(e){console.error(`Failed to load the footer: ${e}`)}}async function B(){const t=document.getElementById("popup-placeholder");try{const e=await u("../popups.html");if(e){const o=document.createElement("div");o.innerHTML=e,d.replaceChild(o,t)}}catch(e){console.error(`Failed to load the popups: ${e}`)}}function T(t){const e=document.querySelectorAll("article");if(e.length>0){const o={root:null,rootMargin:"0px",threshold:.5},a=(n,c)=>{n.forEach(s=>{s.isIntersecting?(s.target.classList.add("show"),t&&c.unobserve(s.target)):s.target.classList.remove("show")})},r=new IntersectionObserver(a,o);e.forEach(n=>{r.observe(n)})}}export{x as a,Y as d,u as f,U as g,H as i,T as s};
