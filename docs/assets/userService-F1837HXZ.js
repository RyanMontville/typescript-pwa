import{a as h}from"./canvasService-C9-bMTln.js";import{f}from"./main-BiMAuNzI.js";import{g as x}from"./utils-C-yoJ75Q.js";const p="https://raw.githubusercontent.com/TheRealMonte/data-files/refs/heads/main";async function U(){try{const o=await f(`${p}/allUsers.csv`);if(o){const e=o.trim().split(`
`),r=e[0].split(",").map(i=>i.trim()),s=r.indexOf("username"),n=r.indexOf("canvas2023"),a=r.indexOf("canvas2024"),t=r.indexOf("canvas2025"),l=[];for(let i=1;i<e.length;i++){const c=e[i].split(",");if(c.length===r.length){const m={type:"UserMain",username:c[s]?.trim()||"",canvas2023:+c[n]?.trim()==1||!1,canvas2024:+c[a]?.trim()==1||!1,canvas2025:+c[t]?.trim()==1||!1};l.push(m)}else console.warn(`Skipping row ${i+1} due to incorrect number of columns.`)}return l}else throw new Error("Could not fetch users csv")}catch(o){console.error(`Error creating user list: ${o}`)}}async function y(o){try{const e=await f(`${p}/${o}/users.csv`);if(e){const r=e.trim().split(`
`),s=r[0].split(",").map(d=>d.trim()),n=s.indexOf("username"),a=s.indexOf("userRank"),t=s.indexOf("numPixels"),l=s.indexOf("xCoordinateTop"),i=s.indexOf("yCoordinateTop"),c=s.indexOf("NumPixelsTop"),m=[];for(let d=1;d<r.length;d++){const u=r[d].split(",");if(u.length===s.length){const g={username:u[n]?.trim()||"",userRank:+u[a]?.trim()||0,pixelCount:+u[t]?.trim()||0,xCord:+u[l]?.trim()||0,yCord:+u[i]?.trim()||0,cordCount:+u[c]?.trim()||0};m.push(g)}else console.warn(`Skipping row ${d+1} due to incorrect number of columns.`)}return console.log("Loaded user data from csv"),m}}catch(e){console.error(`Error getting all user stats for ${o}: ${e}`)}}async function O(o,e){const r=await y(e),s=h(e);if(r){const n=r.find(a=>a.username===o);if(n)return{username:o,year:e,blocks:[{type:"standard",layout:"left",icon:"leaderboard",content:[`You ranked ${n.userRank} out of ${s} users in ${e}`]},{type:"user-color-grid",layout:"right",title:"Pixels by color",data:[]},{type:"standard",layout:"left",icon:"colors",content:[`You used ${await k(e,o)} out of the ${e===2023?"32":"34"} colors`]},{type:"standard",layout:"right",icon:"grid_view",content:[`You placed ${n.pixelCount} pixels throughout the event`]},{type:"standard",layout:"left",icon:"kid_star",content:[`The coordinate you placed the most pixels on was (${n.xCord}, ${n.yCord}) - ${n.cordCount} times (including the pixels you deleted)`]},{type:"button-group",layout:"right",title:"View your pixels placed in 2025",icon:"dashboard_customize",buttons:[{linkText:"on white background",classes:"white",page:"/draw",queryParams:{sentFrom:"user",year:e,background:"white",username:o},external:!1},{linkText:"on black background",classes:"black",page:"/draw",queryParams:{sentFrom:"user",year:e,background:"black",username:o},external:!1},{linkText:"on transparent background",classes:"dark-grey",page:"/draw",queryParams:{sentFrom:"user",year:e,background:"transparent",username:o},external:!1}]}]}}return null}async function C(o){try{const e=await f(`${p}/${o}/color_count.csv`);if(e){const r=e.trim().split(`
`),s=r[0].split(",").map(a=>a.trim()),n=[];for(let a=1;a<r.length;a++){const t=r[a].split(",");if(t.length===s.length){const l={username:t[0]?.trim()||"",black:+t[1]?.trim()||0,darkGrey:+t[2]?.trim()||0,deepGrey:+t[3]?.trim()||0,mediumGrey:+t[4]?.trim()||0,lightGrey:+t[5]?.trim()||0,white:+t[6]?.trim()||0,beige:+t[7]?.trim()||0,peach:+t[8]?.trim()||0,brown:+t[9]?.trim()||0,chocolate:+t[10]?.trim()||0,rust:+t[11]?.trim()||0,orange:+t[12]?.trim()||0,yellow:+t[13]?.trim()||0,pastelYellow:+t[14]?.trim()||0,lime:+t[15]?.trim()||0,green:+t[16]?.trim()||0,darkGreen:+t[17]?.trim()||0,forest:+t[18]?.trim()||0,darkTeal:+t[19]?.trim()||0,lightTeal:+t[20]?.trim()||0,aqua:+t[21]?.trim()||0,azure:+t[22]?.trim()||0,blue:+t[23]?.trim()||0,navy:+t[24]?.trim()||0,purple:+t[25]?.trim()||0,mauve:+t[26]?.trim()||0,magenta:+t[27]?.trim()||0,pink:+t[28]?.trim()||0,watermelon:+t[29]?.trim()||0,red:+t[30]?.trim()||0,rose:+t[31]?.trim()||0,maroon:+t[32]?.trim()||0,darkChocolate:+t[33]?.trim()||0,darkPurple:+t[34]?.trim()||0};n.push(l)}else console.warn(`Skipping row ${a+1} due to incorrect number of columns.`)}return console.log("Loaded color count data"),n}return null}catch(e){return console.error(`Failed to fetch color counts: ${e}`),null}}async function w(o,e){const r=await C(o);if(r){let s=r.find(n=>n.username===e);if(s){const n=Object.keys(s),a=Object.values(s);n.shift(),a.shift();let t=[];return n.forEach((l,i)=>{if(a[i]>0){const c=l.replace(/([a-z])([A-Z])/g,"$1 $2").toLowerCase(),m={class:l,label:c,hex:x(c),count:a[i]};t.push(m)}}),t.sort((l,i)=>i.count-l.count),t}}return null}async function k(o,e){const r=await w(o,e);return r?r.length:0}export{w as G,y as a,O as b,U as g};
