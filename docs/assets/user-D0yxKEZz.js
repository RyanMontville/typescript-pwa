import{i as S,s as w,g as v}from"./main-BiMAuNzI.js";import{G as P,b as E,c as b}from"./userService-DzLyrweE.js";/* empty css           */import{c as y,m as d}from"./utils-BsKTqsVn.js";import{g as p,r as m,c as k,a as x}from"./createNodeTree-D1gklQdz.js";import"./canvasService-CrJZXPLr.js";let o=0,r="";const c=document.querySelector("main");let h=null,f;S("users","",!0).then(async()=>{const e=performance.now();o=v();const t=new URLSearchParams(window.location.search).get("username");t&&(r=t),h=await P(o,r),f=await E(o,r),await A(),document.title=`${r} - Canvas Stats`,c.classList.remove("hide");const i=document.getElementById("loading");i&&i.remove(),w(!0);const a=performance.now();console.log(`Execution time: ${a-e} milliseconds`)});function C(e,n){const t={year:n,username:e||"",blocks:[]};if(!e||e.length===0){const s={type:"standard",layout:"left",icon:"person_cancel",content:["Error loading user stats. Username not provided."]};t.blocks.push(s)}else{const s={type:"standard",layout:"left",icon:"person_cancel",content:[`${e} did not participate in Canvas ${n}`]};t.blocks.push(s)}const i={type:"standard",layout:"left",content:[[{linkText:"Click here",page:"/users",external:!1,queryParams:{year:n},classes:""},` to view the users who participated in ${n}`]]},a={type:"standard",layout:"left",content:[["If you still can't find your username and you truely believe you did participate in 2024, send a DM to ",{linkText:"@the_real_monte",url:"https://sh.itjust.works/u/the_real_monte",external:!0,queryParams:{},classes:""}," and we can check the database."]]};return t.blocks.push(i),t.blocks.push(a),t}async function A(){if(r!==""){const e=await b(r,o);if(e){const n=y("h2",r);c.appendChild(n),e.blocks.forEach(async t=>{const i=p(t,o);if(t.type==="user-color-grid"){const a=document.createElement("article");a.setAttribute("class",`${t.layout} colorStat`);const s=document.createElement("div");s.setAttribute("id","colorCountsPieChart"),a.appendChild(s);const l=document.createElement("section");if(l.setAttribute("class","color-section"),t.title){const g=y("h3",t.title);l.appendChild(g)}const u=document.createElement("div");u.setAttribute("id","tooltip"),l.appendChild(u),a.appendChild(l),c.appendChild(a)}else if(t.type==="graph"){const a=d("article",null,t.layout,null),s=d("section",null,null,null);if(t.title){const u=d("h3",null,"center",t.title);s.appendChild(u)}const l=d("div","line-graph-container",null,null);l.setAttribute("style","width: 100%; max-width: 800px; margin: auto;"),s.appendChild(l),a.appendChild(s),c.appendChild(a)}else m(i,c)}),h&&k(2025,h,"colorCountsPieChart",!1,"slice-clickable"),f&&x(f,"#line-graph-container")}else C(r,o).blocks.forEach(t=>{const i=p(t,o);m(i,c)})}else C(r,o).blocks.forEach(n=>{const t=p(n,o);m(t,c)})}
