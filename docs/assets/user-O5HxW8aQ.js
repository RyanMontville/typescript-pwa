import{i as S,s as w,g as v}from"./main-BiMAuNzI.js";import{G as P,b as E,c as b}from"./userService-DCbFkD4g.js";/* empty css           */import{c as y,m as d}from"./utils-BsKTqsVn.js";import{g as p,r as h,c as k,a as x}from"./createNodeTree-D1gklQdz.js";import"./canvasService-CrJZXPLr.js";let o=0,r="";const l=document.querySelector("main");let m=null,f;S("users","",!0).then(async()=>{o=v();const e=new URLSearchParams(window.location.search).get("username");e&&(r=e),m=await P(o,r),f=await E(o,r),await A(),document.title=`${r} - Canvas Stats`,l.classList.remove("hide");const t=document.getElementById("loading");t&&t.remove(),w(!0)});function C(a,e){console.log(`Username is ${a?.length}`);const t={year:e,username:a||"",blocks:[]};if(!a||a.length===0){const s={type:"standard",layout:"left",icon:"person_cancel",content:["Error loading user stats. Username not provided."]};t.blocks.push(s)}else{const s={type:"standard",layout:"left",icon:"person_cancel",content:[`${a} did not participate in Canvas ${e}`]};t.blocks.push(s)}const c={type:"standard",layout:"left",content:[[{linkText:"Click here",page:"/users",external:!1,queryParams:{year:e},classes:""},` to view the users who participated in ${e}`]]},n={type:"standard",layout:"left",content:[["If you still can't find your username and you truely believe you did participate in 2024, send a DM to ",{linkText:"@the_real_monte",url:"https://sh.itjust.works/u/the_real_monte",external:!0,queryParams:{},classes:""}," and we can check the database."]]};return t.blocks.push(c),t.blocks.push(n),t}async function A(){if(r!==""){const a=await b(r,o);if(a){const e=y("h2",r);l.appendChild(e),a.blocks.forEach(async t=>{const c=p(t,o);if(t.type==="user-color-grid"){const n=document.createElement("article");n.setAttribute("class",`${t.layout} colorStat`);const s=document.createElement("div");s.setAttribute("id","colorCountsPieChart"),n.appendChild(s);const i=document.createElement("section");if(i.setAttribute("class","color-section"),t.title){const g=y("h3",t.title);i.appendChild(g)}const u=document.createElement("div");u.setAttribute("id","tooltip"),i.appendChild(u),n.appendChild(i),l.appendChild(n)}else if(t.type==="graph"){const n=d("article",null,t.layout,null),s=d("section",null,null,null);if(t.title){const u=d("h3",null,"center",t.title);s.appendChild(u)}const i=d("div","line-graph-container",null,null);i.setAttribute("style","width: 100%; max-width: 800px; margin: auto;"),s.appendChild(i),n.appendChild(s),l.appendChild(n)}else h(c,l)}),m&&k(2025,m,"colorCountsPieChart",!1,"slice-clickable"),f&&x(f,"#line-graph-container")}else C(r,o).blocks.forEach(t=>{const c=p(t,o);h(c,l)})}else C(r,o).blocks.forEach(e=>{const t=p(e,o);h(t,l)})}
