import{i as C,a as y,d as g,s as v,g as A}from"./main-D2Ctbpwk.js";import{g as E,a as L}from"./userService-j1tpg5Eg.js";import{g as $}from"./canvasService-1HiiuAQ0.js";import{c as w,b as k}from"./utils-BVHWbP7o.js";let u="",l,c=[];const b=document.querySelector("main"),p=document.querySelector("body"),h=document.querySelector("h2"),m=document.getElementById("return-to-top");function f(){if(h.textContent=u,m.classList.remove("hide"),l){c.length<10&&m.classList.add("hide");const s=c.reduce((a,t)=>{const n=document.createElement("article");n.setAttribute("class","user-row middle");const r=document.createElement("div");r.setAttribute("class","username");const i=document.createElement("p");if(i.textContent=t.username,r.appendChild(i),n.appendChild(r),t.canvas2023){const e=document.createElement("a");e.setAttribute("href",`user.html?user=${t.username}&year=2023`),e.setAttribute("class","btn pink"),e.textContent="2023",n.appendChild(e)}if(t.canvas2024){const e=document.createElement("a");e.setAttribute("href",`user.html?user=${t.username}&year=2024`),e.setAttribute("class","btn purple"),e.textContent="2024",n.appendChild(e)}if(t.canvas2025){const e=document.createElement("a");e.setAttribute("href",`user.html?user=${t.username}&year=2025`),e.setAttribute("class","btn mauve"),e.textContent="2025",n.appendChild(e)}return a.appendChild(n),a},document.createElement("div"));s.setAttribute("class","hide"),s.setAttribute("id","userListContainer"),p.replaceChild(s,b)}}async function U(){const s=A(),a=await L(s);if(a){h.textContent=`Displaying ${a.length} users by ${s} rankings:`;const t=a.reduce((n,r)=>{const i=document.createElement("article");i.setAttribute("class","user-row middle");const e=document.createElement("div");e.setAttribute("class","username");const o=document.createElement("p");o.textContent=`${r.userRank}) ${r.username} - ${r.pixelCount} pixels`,e.appendChild(o),i.appendChild(e);const d=document.createElement("a");return d.setAttribute("href",`user.html?user=${r.username}&year=${s}`),d.setAttribute("class","btn mauve"),d.textContent=`${s}`,i.appendChild(d),n.appendChild(i),n},document.createElement("div"));t.setAttribute("class","hide"),t.setAttribute("id","userListContainer"),p.replaceChild(t,b)}}function x(){const s=$(),a=document.getElementById("filterPlaceholder"),t=s.reduce((i,e)=>{const o=document.createElement("button");return o.setAttribute("class",`btn ${e.contentValue}`),o.textContent=e.contentKey,o.addEventListener("click",()=>window.location.href=`users?year=${e.contentKey}`),i.appendChild(o),i},document.createElement("section"));t.setAttribute("class","btn-wrapper hide"),t.setAttribute("id","filterOptions");const n=w("blue","All Users");n.addEventListener("click",()=>window.location.href="users.html"),t.prepend(n);const r=k("h2","Filter Users:");t.prepend(r),p.replaceChild(t,a)}C("Users","Users",!0).then(async()=>{if(l=await E(),l){x();const n=y();n?(c=l.filter(r=>r.username.toLowerCase().includes(n.toLowerCase())),u=c.length>0?`Displaying ${c.length} users matching '${n}':`:`No results for '${n}'`,f()):g()?await U():(c=l,u=`Displaying ${l.length} users in alphabetical order:`,f())}const s=document.getElementById("loading");s&&s.remove();const a=document.getElementById("filterOptions");a&&a.classList.remove("hide"),h.classList.remove("hide");const t=document.getElementById("userListContainer");t&&t.classList.remove("hide"),m.addEventListener("click",()=>{document.querySelector("header").scrollIntoView({behavior:"smooth",block:"start"})}),v(!1)});
