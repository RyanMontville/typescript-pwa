import{i as b,s as g,g as P}from"./main-D2Ctbpwk.js";import{G as $,b as v}from"./userService-j1tpg5Eg.js";/* empty css           */import{b as w,d as B,e as h,U as C,P as S,C as c}from"./utils-BVHWbP7o.js";import{h as A,i as u}from"./d3Graphics-B4Wv94lX.js";import"./canvasService-1HiiuAQ0.js";let n=0,o="";const s=document.querySelector("main");let p=null;function E(i){if(p){const a=document.createElement("article");a.setAttribute("class",i.direction);const t=document.createElement("div");t.setAttribute("id","colorCountsPieChart"),a.appendChild(t);const e=document.createElement("section");e.setAttribute("class","color-section");const l=w("h3","Pixels placed by color:");e.appendChild(l);const r=document.createElement("div");return r.setAttribute("id","tooltip"),e.appendChild(r),a.appendChild(e),a}}async function x(){if(o!==""){const i=await v(o,n);if(console.log(i),i){const a=w("h2",o);s.appendChild(a),i.forEach(async t=>{if(t.iconText=="colorCount"){const e=E(t);e&&(s.appendChild(e),p&&A(n,p,"colorCountsPieChart",!1,"slice"))}else if(t.iconText==="drawLinks"){const e=document.createElement("article");e.setAttribute("class",t.direction);const l=B("icon","dashboard_customize");e.appendChild(l);const r=document.createElement("section"),m=w("h3",`View your pixels placed in ${n}`);r.appendChild(m);const d=document.createElement("div");d.setAttribute("class","btn-wrapper");const f=h("white",`draw.html?sentFrom=user&username=${o}&year=${n}&background=white`,"with white background",!1);d.appendChild(f);const k=h("black",`draw.html?sentFrom=user&username=${o}&year=${n}&background=black`,"with black background",!1);d.appendChild(k);const y=h("dark-grey",`draw.html?sentFrom=user&username=${o}&year=${n}&background=transparent`,"with transparent background",!1);d.appendChild(y),r.appendChild(d),e.appendChild(r),s.appendChild(e)}else{const e=u(t);s.appendChild(e)}})}else{const a=new S([new c("text",`${o} did not participate in Canvas ${n}`)]),t=u(new C("left","icon","person_cancel",a));s.appendChild(t);const e={parts:[new c(`users?year=${n}`,"Click here"),new c("text",` to view the list of users for Canvas ${n} and see if you can find your username`)]},l=u(new C("right","icon","person_search",e));s.appendChild(l);const r={parts:[new c("text",`If you still can't find your username and you truely believe you did participate in ${n}, send a dm to `),new c("https://sh.itjust.works/u/the_real_monte","@the_real_monte"),new c("text"," on Lemmy and we can check the database")]},m=u(new C("left","icon","mail",r));s.appendChild(m)}}else console.warn("Didn't find username")}b("users","",!0).then(async()=>{n=P();const a=new URLSearchParams(window.location.search).get("user");a&&(o=a),p=await $(n,o),await x(),document.title=`${o} - Canvas Stats`,s.classList.remove("hide");const t=document.getElementById("loading");t&&t.remove(),g(!0)});
